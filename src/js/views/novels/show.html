<div class="novelShow">
  <div class="picture-container jumbotron">
    <img ng-src="{{ show.novel.image }}">
  </div>
  <div class="centered">
    <div class="content">
      <h1>{{ show.novel.title }}</h1>
      <h4>Started by <span ui-sref="usersShow({ id: show.novel.creator._id })">{{ show.novel.creator.username }}</span></h4>
      <button id="novelStatus"><a href="#" id="novelContainer">{{ show.novel.status }}</a></button>
    </div>
  </div>

  <div class="novel-content">
    <div class="container">
      <div class="novel row">
        <div class="col-md-12">
          <h4 ng-if="!show.lastEntry" class="errorMessage">Patience, you contributed to the novel last.</h4>
          <blockquote>
            <span
            data-toggle="tooltip"
            class="prevEntry"
            title="{{ novelist.author.username }}"
            ng-repeat="novelist in show.novel.entries"
            ng-bind-html="novelist.body | rawHtml"></span>
          </blockquote>

          <p>Contributors to the novel
            <span class="novelContributor" ng-repeat="contributors in show.novel.entries" ui-sref="usersShow({ id: contributors.author._id })">
              | <span class="novelistUnderline"> {{ contributors.author.username }} </span>
            </span>
          </p>


          <form ng-submit="show.submitEntry()" name="novelEntriesForm" ng-if="show.novelStatus">

            <div>
              <span
              autofocus
              class="nextEntry"
              contenteditable="true"
              ng-model="show.entry"
              data-placeholder="Click here to type"
              data-focused-advice="Start typing"></span>
            </div>

            <!-- <input
            type="hidden"
            id="novelUser"
            class="form-control"
            value="{{ main.user.id }}"> -->

            <p>WordCount: <span ng-bind="show.countOf(show.entry)"></span>
              EntryCount: {{ show.entriesCount }}</p>

              <!-- Validation Check -->
              <p class="errorMessage" ng-if="!show.wordCountStatus">
                Please enter a maximum of {{ show.maxWordCount }} words
              </p>

              <input
              class="btn btn-default pull-right novelSubmitBtn"
              aria-describedby="sizing-addon1"
              type="submit"
              value="Contribute"
              ng-disabled="novelEntriesForm.$invalid || !show.wordCountStatus">
            </form>
          </div>
        </div>

      <div class="comments row">
        <div class="col-md-12">
          <form ng-submit="show.submitComment()" name="novelCommentForm">
            <input type="hidden" id="novelUser" class="form-control" value="{{ main.user.id }}">
            <h3>Comment on the novel</h3>
            <div class="input-group input-group-lg">
              <span class="input-group-addon">{{ main.user.username }}:</span>
              <input type="text" id="novelComment sizing-addon3" class="form-control" placeholder="I think..." ng-model="show.novel.comments.body" required>
              <span class="input-group-btn">
                <input class="btn btn-default" aria-describedby="sizing-addon3" type="submit" value="Add" ng-disabled="novelCommentForm.$invalid">
              </span>
            </div>
          </form>

          <h3>Comments</h3>
          <ul ng-repeat="comments in show.novel.comments | orderBy:'-'">
            <i class="fa fa-comment" aria-hidden="true"> <span class="commentWrap">{{ comments.body }}<span class="commentDetails"> by {{ comments.author.username }} <time am-time-ago="comments.createdAt"></time></span></span></i>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
